<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Agentic Researcher â€“ Confirm Run</title>
    <style>
      body { font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto; margin: 24px; }
      .pill { display: inline-block; padding: 2px 8px; border-radius: 999px; background: #f3f4f6; font-size: 12px; }
      pre { background: #0b1020; color: #e5e7eb; padding: 12px; border-radius: 10px; overflow:auto; }
      .btn { padding: 8px 12px; border-radius: 10px; border: 1px solid #ccc; background: #fff; cursor: pointer; }
      .btn-primary { background: #111827; color: white; border-color: #111827; }
    </style>
  </head>
  <body>
    <h1>Confirm run</h1>

    <p>Detected seeds: {% for s in seeds %}<span class="pill">{{ s }}</span> {% endfor %}</p>

    <h3>Counts</h3>
    <ul>
      {% for s, n in counts.items() %}
        <li><b>{{ s }}</b>: {{ n }} part tokens</li>
      {% endfor %}
    </ul>

    <h3>Sample (first 10 per seed)</h3>
    <pre>{{ sample | tojson(indent=2) }}</pre>

    <h3>Directions</h3>
    <pre style="background:#f3f4f6;color:#111827;">{{ directions }}</pre>

    <form method="post" action="/runs/create_from_blocks">
      <input type="hidden" name="blocks" value="{{ blocks_escaped }}" />
      <input type="hidden" name="directions" value="{{ directions_escaped }}" />
      <button class="btn btn-primary" type="submit">Confirm & Start</button>
      <a class="btn" href="/runs/new">Edit</a>
    </form>
  </body>
</html>
